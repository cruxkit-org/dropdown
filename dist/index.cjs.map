{"version":3,"sources":["../node_modules/@minejs/signals/src/index.ts","../src/kit/manager.tsx","../src/kit/dropdown.tsx"],"names":["currentEffect","signal","initialValue","value","subscribers","read","write","newValue","fn","update","peek","subscribe","sig","effect","cleanup","isDisposed","execute","prevEffect","result","disposer","DropdownManagerClass","v","id","close","parentId","level","instance","list","item","sibling","child","directChildren","allChildren","parent","ancestorId","descendantId","current","DropdownManager","sizeMap","positionMap","directionMap","MenuContainer","getArrowStyle","dir","Dropdown","props","size","position","initialDirection","triggerMode","triggerDisplay","hoverDelay","styleMode","variant","color","dropdownId","isOpen","currentDirection","hoverTimeout","chevronElement","dropdownContainer","dropdownMenu","arrowPopup","arrowStyle","handleClickOutside","e","container","updatePosition","menuEl","containerEl","triggerRect","wasHidden","menuRect","viewportWidth","viewportHeight","checkSpace","bestDirection","toggleDropdown","openDropdown","closeDropdown","handleSelect","disabled","isCurrentlyOpen","d","c","arrowEl","newStyle","chevronEl","renderTriggerContent","iconElement","jsx","Icon","renderChevron","label","jsxs","triggerHandlers","Button","Fragment","option","idx","elements","Divider","next"],"mappings":"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","file":"index.cjs","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/index.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { Signal, EffectCleanup, Computed } from './types';\r\n    export type * from './types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    let currentEffect       : (() => void)   | null = null;\r\n    let currentRoot         : (() => void)[] | null = null;\r\n    let batchDepth          : number                = 0;\r\n    const batchedEffects    : Set<() => void>       = new Set<() => void>();\r\n    const flushedEffects    : Set<() => void>       = new Set<() => void>();\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Creates a reactive signal that can be read, written, and subscribed to.\r\n     * @template T - The type of value stored in the signal\r\n     * @param {T} initialValue - The initial value of the signal\r\n     * @returns {Signal<T>} A signal object with read, set, update, peek, and subscribe methods\r\n     * @example\r\n     * const count = signal(0);\r\n     * console.log(count()); // 0\r\n     * count.set(5); // Update value\r\n     */\r\n    export function signal<T>(initialValue: T): Signal<T> {\r\n        let value           = initialValue;\r\n        const subscribers   = new Set<() => void>();\r\n\r\n        function read(): T {\r\n            // Track dependency if inside effect\r\n            if (currentEffect) {\r\n                subscribers.add(currentEffect);\r\n            }\r\n            return value;\r\n        }\r\n\r\n        function write(newValue: T): void {\r\n            // Only update if value actually changed\r\n            if (Object.is(value, newValue)) return;\r\n\r\n            value = newValue;\r\n\r\n            // Notify all subscribers\r\n            if (batchDepth > 0) {\r\n                // Batch mode: collect effects\r\n                subscribers.forEach(fn => batchedEffects.add(fn));\r\n            } else {\r\n                // Immediate mode: run effects now\r\n                subscribers.forEach(fn => fn());\r\n            }\r\n        }\r\n\r\n        function update(fn: (prev: T) => T): void {\r\n            write(fn(value));\r\n        }\r\n\r\n        function peek(): T {\r\n            // Read without tracking\r\n            return value;\r\n        }\r\n\r\n        function subscribe(fn: () => void): () => void {\r\n            subscribers.add(fn);\r\n            return () => subscribers.delete(fn);\r\n        }\r\n\r\n        // Create signal function with methods\r\n        const sig = read as Signal<T>;\r\n        sig.set = write;\r\n        sig.update = update;\r\n        sig.peek = peek;\r\n        sig.subscribe = subscribe;\r\n\r\n        return sig;\r\n    }\r\n\r\n    /**\r\n     * Automatically runs a function when its signal dependencies change.\r\n     * @param {() => EffectCleanup} fn - The effect function to run. Can optionally return a cleanup function.\r\n     * @returns {() => void} A dispose function to stop the effect and clean up\r\n     * @example\r\n     * const count = signal(0);\r\n     * effect(() => {\r\n     *   console.log('Count:', count());\r\n     *   return () => console.log('Cleaning up');\r\n     * });\r\n     */\r\n    export function effect(fn: () => EffectCleanup): () => void {\r\n        let cleanup: (() => void) | undefined;\r\n        let isDisposed = false;\r\n\r\n        const execute = () => {\r\n            if (isDisposed) return;\r\n\r\n            // Run cleanup from previous execution\r\n            if (cleanup) {\r\n                cleanup();\r\n                cleanup = undefined;\r\n            }\r\n\r\n            // Set as current effect for dependency tracking\r\n            const prevEffect = currentEffect;\r\n            currentEffect = execute;\r\n\r\n            try {\r\n                // Run the effect function\r\n                const result = fn();\r\n\r\n                // Store cleanup if returned\r\n                if (typeof result === 'function') {\r\n                    cleanup = result;\r\n                }\r\n            } finally {\r\n                // Restore previous effect\r\n                currentEffect = prevEffect;\r\n            }\r\n        };\r\n\r\n        // Run immediately\r\n        execute();\r\n\r\n        // Create dispose function\r\n        const disposer = () => {\r\n            if (isDisposed) return;\r\n            isDisposed = true;\r\n            if (cleanup) cleanup();\r\n        };\r\n\r\n        // Register with current root if one exists\r\n        if (currentRoot) {\r\n            currentRoot.push(disposer);\r\n        }\r\n\r\n        // Return dispose function\r\n        return disposer;\r\n    }\r\n\r\n    /**\r\n     * Creates a computed signal that automatically updates when its dependencies change.\r\n     * The computation result is cached and only recomputed when dependencies change.\r\n     * @template T - The type of value computed\r\n     * @param {() => T} fn - The computation function\r\n     * @returns {Computed<T>} A read-only computed signal\r\n     * @example\r\n     * const count = signal(5);\r\n     * const doubled = computed(() => count() * 2);\r\n     * console.log(doubled()); // 10\r\n     */\r\n    export function computed<T>(fn: () => T): Computed<T> {\r\n        const sig = signal<T>(undefined as T);\r\n\r\n        // Create effect that updates the signal\r\n        effect(() => {\r\n            sig.set(fn());\r\n        });\r\n\r\n        // Mark as computed\r\n        const computed = sig as Computed<T>;\r\n        Object.defineProperty(computed, 'isComputed', {\r\n            value: true,\r\n            writable: false\r\n        });\r\n\r\n        return computed;\r\n    }\r\n\r\n    /**\r\n     * Groups multiple signal updates together, deferring effect execution until all updates complete.\r\n     * This improves performance by preventing cascading effect runs.\r\n     * @template T - The return type of the function\r\n     * @param {() => T} fn - A function that performs multiple signal updates\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const a = signal(1);\r\n     * const b = signal(2);\r\n     * batch(() => {\r\n     *   a.set(10);\r\n     *   b.set(20);\r\n     * }); // Effects only run once\r\n     */\r\n    export function batch<T>(fn: () => T): T {\r\n        batchDepth++;\r\n\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            batchDepth--;\r\n\r\n            // If we're back at depth 0, flush batched effects\r\n            if (batchDepth === 0) {\r\n                // Keep batch mode active while flushing to prevent cascading effects\r\n                batchDepth++;\r\n                flushedEffects.clear();\r\n                try {\r\n                    // Keep running effects until no more are queued\r\n                    while (batchedEffects.size > 0) {\r\n                        const effects = Array.from(batchedEffects);\r\n                        batchedEffects.clear();\r\n                        effects.forEach(fn => {\r\n                            // Only run if we haven't run it in this batch\r\n                            if (!flushedEffects.has(fn)) {\r\n                                flushedEffects.add(fn);\r\n                                fn();\r\n                            }\r\n                        });\r\n                    }\r\n                } finally {\r\n                    batchDepth--;\r\n                    flushedEffects.clear();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reads signals without creating dependencies on them.\r\n     * Useful for accessing signal values without triggering effect re-runs.\r\n     * @template T - The return type of the function\r\n     * @param {() => T} fn - A function that accesses signals\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const count = signal(0);\r\n     * effect(() => {\r\n     *   const value = untrack(() => count()); // Won't trigger re-run\r\n     *   console.log(value);\r\n     * });\r\n     */\r\n    export function untrack<T>(fn: () => T): T {\r\n        const prevEffect = currentEffect;\r\n        currentEffect = null;\r\n\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            currentEffect = prevEffect;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Runs an effect only when a specific signal changes, providing both new and previous values.\r\n     * @template T - The type of the signal\r\n     * @param {Signal<T>} sig - The signal to watch\r\n     * @param {(value: T, prevValue: T) => EffectCleanup} fn - Effect function called with new and previous values\r\n     * @returns {() => void} A dispose function to stop watching\r\n     * @example\r\n     * const count = signal(0);\r\n     * on(count, (newVal, oldVal) => {\r\n     *   console.log(`Changed from ${oldVal} to ${newVal}`);\r\n     * });\r\n     */\r\n    export function on<T>(\r\n        sig: Signal<T>,\r\n        fn: (value: T, prevValue: T) => EffectCleanup\r\n    ): () => void {\r\n        let prevValue = sig.peek();\r\n\r\n        return effect(() => {\r\n            // Read the signal to create dependency\r\n            const value = sig();\r\n\r\n            // Run callback without tracking new dependencies\r\n            const cleanup = untrack(() => fn(value, prevValue));\r\n            prevValue = value;\r\n            return cleanup;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates a store object where each property is a signal.\r\n     * Provides a convenient way to manage multiple related reactive values.\r\n     * @template T - The type of the initial state object\r\n     * @param {T} initialState - An object with initial values\r\n     * @returns {{ [K in keyof T]: Signal<T[K]> }} An object with signals for each property\r\n     * @example\r\n     * const state = store({ count: 0, name: 'John' });\r\n     * console.log(state.count()); // 0\r\n     * state.name.set('Jane');\r\n     */\r\n    export function store<T extends Record<string, any>>(\r\n        initialState: T\r\n    ): { [K in keyof T]: Signal<T[K]> } {\r\n        const store = {} as any;\r\n\r\n        for (const key in initialState) {\r\n            store[key] = signal(initialState[key]);\r\n        }\r\n\r\n        return store;\r\n    }\r\n\r\n    /**\r\n     * Memoizes the result of an expensive computation, caching it indefinitely.\r\n     * Unlike computed, this doesn't depend on reactive signals.\r\n     * @template T - The type of the memoized value\r\n     * @param {() => T} fn - A function that performs the computation\r\n     * @returns {() => T} A function that returns the cached result\r\n     * @example\r\n     * const expensiveCalc = memo(() => {\r\n     *   return Array.from({ length: 1000 }).map(expensiveOp);\r\n     * });\r\n     * const result = expensiveCalc(); // Computed only once\r\n     */\r\n    export function memo<T>(fn: () => T): () => T {\r\n        let cachedValue: T | undefined;\r\n        let hasCachedValue = false;\r\n\r\n        return () => {\r\n            if (hasCachedValue) {\r\n                return cachedValue as T;\r\n            }\r\n\r\n            // Compute the value\r\n            const value = fn();\r\n\r\n            // Cache it\r\n            cachedValue = value;\r\n            hasCachedValue = true;\r\n\r\n            return value;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates a root scope for managing effect and computed signal lifecycles.\r\n     * All effects and disposers created within the function are collected and can be cleaned up together.\r\n     * @template T - The return type of the function\r\n     * @param {(dispose: () => void) => T} fn - A function that receives a dispose function\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const dispose = root((dispose) => {\r\n     *   effect(() => console.log('Running'));\r\n     *   return 42;\r\n     * });\r\n     * dispose(); // Cleans up all effects created in the root\r\n     */\r\n    export function root<T>(fn: (dispose: () => void) => T): T {\r\n        const disposers: (() => void)[] = [];\r\n        const prevRoot = currentRoot;\r\n        currentRoot = disposers;\r\n\r\n        try {\r\n            const dispose = () => {\r\n                disposers.forEach(d => d());\r\n                disposers.length = 0;\r\n                currentRoot = prevRoot;\r\n            };\r\n\r\n            return fn(dispose);\r\n        } finally {\r\n            currentRoot = prevRoot;\r\n        }\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ HELP ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Development utilities for debugging signal reactivity\r\n     */\r\n    export const dev = {\r\n        /**\r\n         * Returns the currently executing effect, or null if no effect is running\r\n         * @returns {(() => void) | null} The current effect function or null\r\n         */\r\n        getCurrentEffect(): (() => void) | null {\r\n            return currentEffect;\r\n        },\r\n\r\n        /**\r\n         * Returns the current batch depth (for debugging nested batch calls)\r\n         * @returns {number} The current batch nesting level\r\n         */\r\n        getBatchDepth(): number {\r\n            return batchDepth;\r\n        },\r\n\r\n        /**\r\n         * Returns the count of effects currently pending in the batch queue\r\n         * @returns {number} The number of batched effects waiting to run\r\n         */\r\n        getBatchedEffectsCount(): number {\r\n            return batchedEffects.size;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Type guard to check if a value is a signal\r\n     * @template T - The type of value the signal contains\r\n     * @param {any} value - The value to check\r\n     * @returns {boolean} True if the value is a signal\r\n     * @example\r\n     * if (isSignal(myValue)) {\r\n     *   console.log(myValue());\r\n     * }\r\n     */\r\n    export function isSignal<T>(value: any): value is Signal<T> {\r\n        return (\r\n            typeof value === 'function' &&\r\n            'set' in value &&\r\n            'update' in value &&\r\n            'peek' in value\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Type guard to check if a value is a computed signal\r\n     * @template T - The type of value the computed signal contains\r\n     * @param {any} value - The value to check\r\n     * @returns {boolean} True if the value is a computed signal\r\n     * @example\r\n     * if (isComputed(myValue)) {\r\n     *   console.log('This is a computed signal');\r\n     * }\r\n     */\r\n    export function isComputed<T>(value: any): value is Computed<T> {\r\n        return isSignal(value) && 'isComputed' in value;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ ════ ════════════════════════════════════════╗\r\n\r\n    export default {\r\n        signal,\r\n        effect,\r\n        computed,\r\n        batch,\r\n        untrack,\r\n        on,\r\n        store,\r\n        memo,\r\n        root,\r\n        isSignal,\r\n        isComputed,\r\n        dev\r\n    };\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n","// src/kit/dropdown.tsx\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { signal } from '@minejs/signals';\r\n    import type { DropdownInstance } from '../types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    class DropdownManagerClass {\r\n        private instances = signal<DropdownInstance[]>([]);\r\n\r\n        register(id: string, close: () => void, parentId: string | null = null): void {\r\n            const level = this.calculateLevel(parentId);\r\n            const instance: DropdownInstance = { id, parentId, close, level };\r\n            this.instances.update(list => [...list, instance]);\r\n        }\r\n\r\n        unregister(id: string): void {\r\n            this.instances.update(list => list.filter(item => item.id !== id));\r\n        }\r\n\r\n        open(id: string): void {\r\n            const instance = this.instances().find(item => item.id === id);\r\n            if (!instance) {\r\n                console.warn('[DropdownManager] Cannot open - dropdown not found:', id);\r\n                return;\r\n            }\r\n\r\n            const siblings = this.instances().filter(item =>\r\n                item.id !== id &&\r\n                item.level === instance.level &&\r\n                item.parentId === instance.parentId\r\n            );\r\n\r\n            siblings.forEach(sibling => {\r\n                sibling.close();\r\n            });\r\n        }\r\n\r\n        close(id: string): void {\r\n            const instance = this.instances().find(item => item.id === id);\r\n            if (!instance) return;\r\n\r\n            const children = this.getChildren(id);\r\n\r\n            children.forEach(child => {\r\n                child.close();\r\n            });\r\n\r\n            instance.close();\r\n        }\r\n\r\n        closeFromLevel(level: number): void {\r\n            const toClose = this.instances().filter(item => item.level >= level);\r\n\r\n            toClose.forEach(item => {\r\n                item.close();\r\n            });\r\n        }\r\n\r\n        private getChildren(parentId: string): DropdownInstance[] {\r\n            const directChildren = this.instances().filter(item => item.parentId === parentId);\r\n            const allChildren: DropdownInstance[] = [...directChildren];\r\n\r\n            directChildren.forEach(child => {\r\n                allChildren.push(...this.getChildren(child.id));\r\n            });\r\n\r\n            return allChildren;\r\n        }\r\n\r\n        private calculateLevel(parentId: string | null): number {\r\n            if (!parentId) return 0;\r\n\r\n            const parent = this.instances().find(item => item.id === parentId);\r\n            return parent ? parent.level + 1 : 0;\r\n        }\r\n\r\n        isAncestor(ancestorId: string, descendantId: string): boolean {\r\n            let current = this.instances().find(item => item.id === descendantId);\r\n\r\n            while (current && current.parentId) {\r\n                if (current.parentId === ancestorId) return true;\r\n                current = this.instances().find(item => item.id === current!.parentId!);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        getRootParent(id: string): DropdownInstance | null {\r\n            let current = this.instances().find(item => item.id === id);\r\n\r\n            while (current && current.parentId) {\r\n                current = this.instances().find(item => item.id === current!.parentId!);\r\n            }\r\n\r\n            return current || null;\r\n        }\r\n\r\n        debug(): void {\r\n            console.log('[DropdownManager] Registered dropdowns:', this.instances());\r\n        }\r\n    }\r\n\r\n    export const DropdownManager = new DropdownManagerClass();\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n","// src/kit/dropdown.tsx\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { type JSXProps, type JSXElement, Divider } from '@minejs/jsx';\r\n    import { signal, effect, type Signal }      from '@minejs/signals';\r\n    import { DropdownManager }                  from './manager';\r\n    import { Button }                           from '@cruxkit/button';\r\n    import { Icon, type IconProps, type IconName } from '@cruxkit/icon';\r\n    import type { DropdownProps, DropdownSize, DropdownPosition, DropdownDirection } from '../types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    const sizeMap: Record<DropdownSize, { text: 'sm' | 'md' | 'lg'; paddingX: 3 | 4 | 5; paddingY: 1 | 2 | 3 }> = {\r\n        sm          : { text: 'sm', paddingX: 3, paddingY: 1 },\r\n        md          : { text: 'md', paddingX: 4, paddingY: 2 },\r\n        lg          : { text: 'lg', paddingX: 5, paddingY: 3 }\r\n    };\r\n\r\n    const positionMap: Record<DropdownPosition, string> = {\r\n        start       : 'start-0',\r\n        center      : 'start-1/2 -translate-x-1/2',\r\n        end         : 'end-0'\r\n    };\r\n\r\n    const directionMap: Record<DropdownDirection, { menu: string; arrow: string }> = {\r\n        down: {\r\n            menu    : 'top-full',\r\n            arrow   : 'bottom-full mb-1'\r\n        },\r\n        up: {\r\n            menu    : 'bottom-full',\r\n            arrow   : 'top-full mt-1'\r\n        },\r\n        side: {\r\n            menu    : 'top-0 start-full ms-2',\r\n            arrow   : 'top-1/2 end-full me-1 -translate-y-1/2'\r\n        }\r\n    };\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    const MenuContainer = 'div' as unknown as (props: JSXProps) => JSXElement;\r\n\r\n    const getArrowStyle = (dir: DropdownDirection) => {\r\n        const arrowSize = 6;\r\n        if (dir === 'up') {\r\n            return {\r\n                width: '0',\r\n                height: '0',\r\n                borderLeft: `${arrowSize}px solid transparent`,\r\n                borderRight: `${arrowSize}px solid transparent`,\r\n                borderBottom: `${arrowSize}px solid var(--border-1)`,\r\n                borderTop: '0',\r\n                top: ''\r\n            };\r\n        } else if (dir === 'side') {\r\n            return {\r\n                width: '0',\r\n                height: '0',\r\n                borderTop: `${arrowSize}px solid transparent`,\r\n                borderBottom: `${arrowSize}px solid transparent`,\r\n                borderInlineStart: `${arrowSize}px solid var(--border-1)`,\r\n                borderInlineEnd: '0',\r\n                top: ''\r\n            };\r\n        } else {\r\n            return {\r\n                width: '0',\r\n                height: '0',\r\n                borderLeft: `${arrowSize}px solid transparent`,\r\n                borderRight: `${arrowSize}px solid transparent`,\r\n                borderTop: `${arrowSize}px solid var(--border-1)`,\r\n                borderBottom: '0',\r\n                top: '-7px'\r\n            };\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Dropdown component that renders a customizable dropdown menu.\r\n     *\r\n     * @param props - Configuration object for the dropdown.\r\n     * @returns Rendered dropdown JSX element.\r\n     *\r\n     * @example\r\n     * ```tsx\r\n     * <Dropdown\r\n     *   trigger=\"Options\"\r\n     *   options={[\r\n     *     { label: 'Edit', value: 'edit' },\r\n     *     { label: 'Delete', value: 'delete', disabled: true },\r\n     *     { divider: true },\r\n     *     { label: 'Export', value: 'export' }\r\n     *   ]}\r\n     *   onSelect={(value) => console.log(value)}\r\n     * />\r\n     * ```\r\n     */\r\n    export function Dropdown(props: DropdownProps): JSXElement {\r\n        const size = props.size || 'md';\r\n        const position = props.position || 'end';\r\n        const initialDirection = props.direction || 'down';\r\n        const triggerMode = props.triggerMode || 'click';\r\n        const triggerDisplay = props.triggerDisplay || 'label-icon';\r\n        const hoverDelay = props.hoverDelay || 150;\r\n        const styleMode = props.styleMode || 'arrow';\r\n        const variant = props.variant || 'ghost';\r\n        const color = props.color || 'neutral';\r\n\r\n        const dropdownId = props.id || `dropdown-${Math.random().toString(36).substr(2, 9)}`;\r\n        const parentId = props.parentId || null;\r\n\r\n        const isOpen = signal(false);\r\n        const currentDirection = signal(initialDirection);\r\n        let hoverTimeout: ReturnType<typeof setTimeout> | null = null;\r\n        const chevronElement = signal<HTMLSpanElement | null>(null);\r\n        const dropdownContainer = signal<HTMLDivElement | null>(null);\r\n        const dropdownMenu = signal<HTMLDivElement | null>(null);\r\n        const arrowPopup = signal<HTMLDivElement | null>(null);\r\n\r\n        effect(() => {\r\n            props.onOpenChange?.(isOpen());\r\n        });\r\n\r\n        // Initial Arrow Style (for SSR/first render if needed, though we update dynamically)\r\n        const arrowStyle = getArrowStyle(initialDirection);\r\n\r\n        DropdownManager.register(\r\n            dropdownId,\r\n            () => {\r\n                isOpen.set(false);\r\n            },\r\n            parentId\r\n        );\r\n\r\n        effect(() => {\r\n            return () => {\r\n                DropdownManager.unregister(dropdownId);\r\n                if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            };\r\n        });\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n            if (!isCurrentlyOpen) return;\r\n\r\n            const handleClickOutside = (e: MouseEvent) => {\r\n                const container = dropdownContainer();\r\n                if (container && !container.contains(e.target as Node)) {\r\n                    DropdownManager.close(dropdownId);\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', handleClickOutside);\r\n\r\n            return () => {\r\n                document.removeEventListener('click', handleClickOutside);\r\n            };\r\n        });\r\n\r\n        const updatePosition = () => {\r\n            const menuEl = dropdownMenu();\r\n            const containerEl = dropdownContainer();\r\n            if (!menuEl || !containerEl) return;\r\n\r\n            const triggerRect = containerEl.getBoundingClientRect();\r\n            // Ensure menu is rendered for measurement\r\n            const wasHidden = menuEl.classList.contains('hidden');\r\n            if (wasHidden) {\r\n                menuEl.style.visibility = 'hidden';\r\n                menuEl.classList.remove('hidden');\r\n                menuEl.classList.add('flex');\r\n            }\r\n\r\n            const menuRect = menuEl.getBoundingClientRect();\r\n            const viewportWidth = window.innerWidth;\r\n            const viewportHeight = window.innerHeight;\r\n\r\n            if (wasHidden) {\r\n                menuEl.classList.remove('flex');\r\n                menuEl.classList.add('hidden');\r\n                menuEl.style.visibility = '';\r\n            }\r\n\r\n            const checkSpace = (dir: DropdownDirection): boolean => {\r\n                // Buffer for aesthetics\r\n                const buffer = 10;\r\n                if (dir === 'down') {\r\n                    return triggerRect.bottom + menuRect.height + buffer <= viewportHeight;\r\n                } else if (dir === 'up') {\r\n                    return triggerRect.top - menuRect.height - buffer >= 0;\r\n                } else if (dir === 'side') {\r\n                    // Check right side primarily (as 'side' usually implies right/end)\r\n                    // If RTL is supported, this might need adjustment, but 'start-full' is usually right in LTR.\r\n                    // Assuming LTR for simplicity or 'side' maps to 'end'.\r\n                    // If 'side' maps to 'start', we need to check left.\r\n                    // The CSS for side is 'start-full', which means it goes to the END (Right in LTR).\r\n                    return triggerRect.right + menuRect.width + buffer <= viewportWidth;\r\n                }\r\n                return false;\r\n            };\r\n\r\n            let bestDirection = initialDirection;\r\n\r\n            // Priority: Requested -> Down -> Up -> Side\r\n            // Or Requested -> Flip -> Side\r\n\r\n            if (!checkSpace(bestDirection)) {\r\n                if (checkSpace('down')) bestDirection = 'down';\r\n                else if (checkSpace('up')) bestDirection = 'up';\r\n                else if (checkSpace('side')) bestDirection = 'side';\r\n                // If none fit, we stick to 'down' or requested (could add logic to pick 'most' space)\r\n            }\r\n\r\n            currentDirection.set(bestDirection);\r\n        };\r\n\r\n        const toggleDropdown = (e: Event) => {\r\n            e.stopPropagation();\r\n            const newState = !isOpen();\r\n\r\n            if (newState) {\r\n                updatePosition(); // Calculate position before opening\r\n                DropdownManager.open(dropdownId);\r\n                isOpen.set(true);\r\n            } else {\r\n                DropdownManager.close(dropdownId);\r\n            }\r\n        };\r\n\r\n        const openDropdown = () => {\r\n            if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            hoverTimeout = setTimeout(() => {\r\n                updatePosition(); // Calculate position before opening\r\n                DropdownManager.open(dropdownId);\r\n                isOpen.set(true);\r\n            }, hoverDelay);\r\n        };\r\n\r\n        const closeDropdown = () => {\r\n            if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            hoverTimeout = setTimeout(() => {\r\n                DropdownManager.close(dropdownId);\r\n            }, hoverDelay);\r\n        };\r\n\r\n        const handleSelect = (value: string | number, disabled?: boolean) => {\r\n            if (disabled) return;\r\n\r\n            props.onSelect?.(value);\r\n            DropdownManager.close(dropdownId);\r\n        };\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n            const menuEl = dropdownMenu();\r\n\r\n            if (menuEl) {\r\n                if (isCurrentlyOpen) {\r\n                    menuEl.classList.remove('hidden');\r\n                    menuEl.classList.add('flex');\r\n                } else {\r\n                    menuEl.classList.remove('flex');\r\n                    menuEl.classList.add('hidden');\r\n                }\r\n            }\r\n        });\r\n\r\n        effect(() => {\r\n            const dir = currentDirection();\r\n            const menuEl = dropdownMenu();\r\n            if (!menuEl) return;\r\n\r\n            // Remove all direction classes\r\n            Object.values(directionMap).forEach(d => {\r\n                d.menu.split(' ').forEach(c => menuEl.classList.remove(c));\r\n            });\r\n\r\n            // Add new direction classes\r\n            directionMap[dir].menu.split(' ').forEach(c => menuEl.classList.add(c));\r\n\r\n            // Update arrow\r\n            const arrowEl = arrowPopup();\r\n            if (arrowEl && styleMode === 'arrow' && props.labelArrow) {\r\n                // Remove old arrow classes\r\n                Object.values(directionMap).forEach(d => {\r\n                    d.arrow.split(' ').forEach(c => arrowEl.classList.remove(c));\r\n                });\r\n                // Add new arrow classes\r\n                directionMap[dir].arrow.split(' ').forEach(c => arrowEl.classList.add(c));\r\n\r\n                // Update arrow style\r\n                const newStyle = getArrowStyle(dir);\r\n                Object.assign(arrowEl.style, newStyle);\r\n\r\n                // Clear potentially conflicting styles if they were set directly (though we use classes mostly)\r\n                if (dir !== 'down') arrowEl.style.top = '';\r\n                if (dir === 'down') arrowEl.style.top = '-7px';\r\n            }\r\n        });\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n            const chevronEl = chevronElement();\r\n\r\n            if (!chevronEl) return;\r\n\r\n            if (isCurrentlyOpen) {\r\n                chevronEl.classList.add('rotate-180');\r\n            } else {\r\n                chevronEl.classList.remove('rotate-180');\r\n            }\r\n        });\r\n\r\n        const renderTriggerContent = () => {\r\n            const iconElement = props.triggerIcon\r\n                ? typeof props.triggerIcon === 'string'\r\n                    ? <Icon name={props.triggerIcon as IconName} size=\"md\" />\r\n                    : <Icon {...props.triggerIcon} />\r\n                : null;\r\n\r\n            const renderChevron = () => {\r\n                if (!props.labelArrow) return null;\r\n\r\n                return (\r\n                    <span\r\n                        ref={chevronElement}\r\n                        className=\"transition-transform duration-200 flex items-center\"\r\n                    >\r\n                        <Icon name={'angle-down' as IconName} size=\"xxs\" />\r\n                    </span>\r\n                );\r\n            };\r\n\r\n            const label =\r\n                typeof props.trigger === 'string'\r\n                    ? (\r\n                        <div as=\"span\" w=\"full\" justify=\"between\" display=\"inline-flex\" textSize={sizeMap[size].text}>\r\n                            {props.trigger}\r\n                        </div>\r\n                    )\r\n                    : props.trigger;\r\n\r\n            switch (triggerDisplay) {\r\n                case 'icon-only':\r\n                    return (\r\n                        <div as=\"span\" w={'full'} justify='between' display=\"inline-flex\" align=\"center\" gap={props.gap ?? 2}>\r\n                            {iconElement || renderChevron()}\r\n                        </div>\r\n                    );\r\n\r\n                case 'label-only':\r\n                    return (\r\n                        <div as=\"span\" w={'full'} justify='between' display=\"inline-flex\" align=\"center\" gap={props.gap ?? 2}>\r\n                            {label}\r\n                            {renderChevron()}\r\n                        </div>\r\n                    );\r\n\r\n                case 'icon-label':\r\n                    return (\r\n                        <div as=\"span\" w={'full'} justify='between' display=\"inline-flex\" align=\"center\" gap={props.gap ?? 2}>\r\n                            {iconElement}\r\n                            {label}\r\n                            {renderChevron()}\r\n                        </div>\r\n                    );\r\n\r\n                case 'label-icon':\r\n                default:\r\n                    return (\r\n                        <div as=\"span\" w={'full'} justify='between' display=\"inline-flex\" align=\"center\" gap={props.gap ?? 2}>\r\n                            {label}\r\n                            {iconElement}\r\n                            {renderChevron()}\r\n                        </div>\r\n                    );\r\n            }\r\n        };\r\n\r\n        const getTriggerHandlers = () => {\r\n            switch (triggerMode) {\r\n                case 'hover':\r\n                    return {\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    };\r\n\r\n                case 'both':\r\n                    return {\r\n                        onClick: toggleDropdown,\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    };\r\n\r\n                case 'click':\r\n                default:\r\n                    return {\r\n                        onClick: toggleDropdown\r\n                    };\r\n            }\r\n        };\r\n\r\n        const triggerHandlers = getTriggerHandlers();\r\n\r\n        const sizeConf = sizeMap[size];\r\n\r\n        return (\r\n            <div\r\n                ref={dropdownContainer}\r\n                className=\"dropdown relative inline-block\"\r\n                {...(triggerMode === 'hover' || triggerMode === 'both'\r\n                    ? {\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    }\r\n                    : {})}\r\n            >\r\n                <Button\r\n                    variant={variant}\r\n                    color={color}\r\n                    size={size}\r\n                    className={`${props.className || ''} ${props.buttonClassName || ''} w-full`}\r\n                    {...triggerHandlers}\r\n                    fullWidth\r\n                    labelFullWidth\r\n                >\r\n                    {typeof props.trigger === 'string'\r\n                        ? renderTriggerContent()\r\n                        : (\r\n                            <div\r\n                                as=\"span\" w={'full'} justify='between'\r\n                                display=\"inline-flex\"\r\n                                align=\"center\"\r\n                                gap={props.gap ?? 2}\r\n                            >\r\n                                {props.trigger}\r\n                            </div>\r\n                        )}\r\n                </Button>\r\n\r\n                <MenuContainer\r\n                    as=\"div\"\r\n                    display=\"flex\"\r\n                    direction=\"column\"\r\n                    className={`\r\n                        dropdown-menu\r\n                        absolute\r\n                        ${directionMap[initialDirection].menu}\r\n                        ${positionMap[position]}\r\n                        hidden\r\n                        bg-surface\r\n                        shadow-lg\r\n                        z-50\r\n                        py-1\r\n                        ${styleMode === 'partof'\r\n                            ? 'w-full min-w-fit rounded-none border-x border-b border-1 mt-0'\r\n                            : `w-full min-w-fit rounded-md border border-1 ${initialDirection === 'down' ? 'mt-2' : ''} ${initialDirection === 'up' ? 'mb-2' : ''}`}\r\n                    `}\r\n                    ref={dropdownMenu}\r\n                    children={\r\n                        <>\r\n                            {styleMode === 'arrow' && props.labelArrow && (\r\n                                <div\r\n                                    ref={arrowPopup}\r\n                                    className={`\r\n                                        absolute\r\n                                        ${directionMap[initialDirection].arrow}\r\n                                    `}\r\n                                    style={arrowStyle}\r\n                                />\r\n                            )}\r\n\r\n                            {props.options.flatMap((option, idx) => {\r\n                                const elements = [];\r\n\r\n                                if (option.divider) {\r\n                                    elements.push(\r\n                                        <Divider max={100} thickness='super-thin' spacing={1} />\r\n                                    );\r\n                                } else {\r\n                                    elements.push(\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            color={color}\r\n                                            size={size}\r\n                                            fullWidth\r\n                                            className={`\r\n                                                dropdown-option\r\n                                                justify-start\r\n                                                text-base\r\n                                                text-1\r\n                                                whitespace-nowrap\r\n                                                ${option.disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : ''}\r\n                                            `}\r\n                                            onClick={() => handleSelect(option.value, option.disabled)}\r\n                                            disabled={option.disabled}\r\n                                            leftIcon={option.icon as IconProps | IconName | undefined}\r\n                                            type=\"button\"\r\n                                        >\r\n                                            {option.label}\r\n                                        </Button>\r\n                                    );\r\n                                }\r\n\r\n                                const next = props.options[idx + 1];\r\n                                if (\r\n                                    props.autoDivider &&\r\n                                    idx < props.options.length - 1 &&\r\n                                    !option.divider &&\r\n                                    (!next || !next.divider)\r\n                                ) {\r\n                                    elements.push(\r\n                                        <Divider className=\"my-1\" max={100} thickness='super-thin' spacing={1} />\r\n                                    );\r\n                                }\r\n\r\n                                return elements;\r\n                            })}\r\n                        </>\r\n                    }\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n"]}