{"version":3,"sources":["../node_modules/@minejs/signals/src/index.ts","../src/kit/manager.tsx","../src/kit/dropdown.tsx"],"names":["currentEffect","signal","initialValue","value","subscribers","read","write","newValue","fn","update","peek","subscribe","sig","effect","cleanup","isDisposed","execute","prevEffect","result","disposer","DropdownManagerClass","v","id","close","parentId","level","instance","list","item","sibling","child","directChildren","allChildren","parent","ancestorId","descendantId","current","DropdownManager","sizeMap","positionMap","directionMap","MenuContainer","Container","Dropdown","props","size","position","direction","triggerMode","triggerDisplay","hoverDelay","styleMode","variant","color","dropdownId","isOpen","hoverTimeout","chevronElement","dropdownContainer","dropdownMenu","y","arrowSize","arrowStyle","handleClickOutside","e","toggleDropdown","openDropdown","closeDropdown","handleSelect","disabled","isCurrentlyOpen","renderTriggerContent","iconElement","jsx","Icon","renderChevron","el","label","Text","jsxs","triggerHandlers","sizeConf","Button","Fragment","option","idx"],"mappings":"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","file":"index.js","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n// src/index.ts\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { Signal, EffectCleanup, Computed } from './types';\r\n    export type * from './types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    let currentEffect       : (() => void)   | null = null;\r\n    let currentRoot         : (() => void)[] | null = null;\r\n    let batchDepth          : number                = 0;\r\n    const batchedEffects    : Set<() => void>       = new Set<() => void>();\r\n    const flushedEffects    : Set<() => void>       = new Set<() => void>();\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Creates a reactive signal that can be read, written, and subscribed to.\r\n     * @template T - The type of value stored in the signal\r\n     * @param {T} initialValue - The initial value of the signal\r\n     * @returns {Signal<T>} A signal object with read, set, update, peek, and subscribe methods\r\n     * @example\r\n     * const count = signal(0);\r\n     * console.log(count()); // 0\r\n     * count.set(5); // Update value\r\n     */\r\n    export function signal<T>(initialValue: T): Signal<T> {\r\n        let value           = initialValue;\r\n        const subscribers   = new Set<() => void>();\r\n\r\n        function read(): T {\r\n            // Track dependency if inside effect\r\n            if (currentEffect) {\r\n                subscribers.add(currentEffect);\r\n            }\r\n            return value;\r\n        }\r\n\r\n        function write(newValue: T): void {\r\n            // Only update if value actually changed\r\n            if (Object.is(value, newValue)) return;\r\n\r\n            value = newValue;\r\n\r\n            // Notify all subscribers\r\n            if (batchDepth > 0) {\r\n                // Batch mode: collect effects\r\n                subscribers.forEach(fn => batchedEffects.add(fn));\r\n            } else {\r\n                // Immediate mode: run effects now\r\n                subscribers.forEach(fn => fn());\r\n            }\r\n        }\r\n\r\n        function update(fn: (prev: T) => T): void {\r\n            write(fn(value));\r\n        }\r\n\r\n        function peek(): T {\r\n            // Read without tracking\r\n            return value;\r\n        }\r\n\r\n        function subscribe(fn: () => void): () => void {\r\n            subscribers.add(fn);\r\n            return () => subscribers.delete(fn);\r\n        }\r\n\r\n        // Create signal function with methods\r\n        const sig = read as Signal<T>;\r\n        sig.set = write;\r\n        sig.update = update;\r\n        sig.peek = peek;\r\n        sig.subscribe = subscribe;\r\n\r\n        return sig;\r\n    }\r\n\r\n    /**\r\n     * Automatically runs a function when its signal dependencies change.\r\n     * @param {() => EffectCleanup} fn - The effect function to run. Can optionally return a cleanup function.\r\n     * @returns {() => void} A dispose function to stop the effect and clean up\r\n     * @example\r\n     * const count = signal(0);\r\n     * effect(() => {\r\n     *   console.log('Count:', count());\r\n     *   return () => console.log('Cleaning up');\r\n     * });\r\n     */\r\n    export function effect(fn: () => EffectCleanup): () => void {\r\n        let cleanup: (() => void) | undefined;\r\n        let isDisposed = false;\r\n\r\n        const execute = () => {\r\n            if (isDisposed) return;\r\n\r\n            // Run cleanup from previous execution\r\n            if (cleanup) {\r\n                cleanup();\r\n                cleanup = undefined;\r\n            }\r\n\r\n            // Set as current effect for dependency tracking\r\n            const prevEffect = currentEffect;\r\n            currentEffect = execute;\r\n\r\n            try {\r\n                // Run the effect function\r\n                const result = fn();\r\n\r\n                // Store cleanup if returned\r\n                if (typeof result === 'function') {\r\n                    cleanup = result;\r\n                }\r\n            } finally {\r\n                // Restore previous effect\r\n                currentEffect = prevEffect;\r\n            }\r\n        };\r\n\r\n        // Run immediately\r\n        execute();\r\n\r\n        // Create dispose function\r\n        const disposer = () => {\r\n            if (isDisposed) return;\r\n            isDisposed = true;\r\n            if (cleanup) cleanup();\r\n        };\r\n\r\n        // Register with current root if one exists\r\n        if (currentRoot) {\r\n            currentRoot.push(disposer);\r\n        }\r\n\r\n        // Return dispose function\r\n        return disposer;\r\n    }\r\n\r\n    /**\r\n     * Creates a computed signal that automatically updates when its dependencies change.\r\n     * The computation result is cached and only recomputed when dependencies change.\r\n     * @template T - The type of value computed\r\n     * @param {() => T} fn - The computation function\r\n     * @returns {Computed<T>} A read-only computed signal\r\n     * @example\r\n     * const count = signal(5);\r\n     * const doubled = computed(() => count() * 2);\r\n     * console.log(doubled()); // 10\r\n     */\r\n    export function computed<T>(fn: () => T): Computed<T> {\r\n        const sig = signal<T>(undefined as T);\r\n\r\n        // Create effect that updates the signal\r\n        effect(() => {\r\n            sig.set(fn());\r\n        });\r\n\r\n        // Mark as computed\r\n        const computed = sig as Computed<T>;\r\n        Object.defineProperty(computed, 'isComputed', {\r\n            value: true,\r\n            writable: false\r\n        });\r\n\r\n        return computed;\r\n    }\r\n\r\n    /**\r\n     * Groups multiple signal updates together, deferring effect execution until all updates complete.\r\n     * This improves performance by preventing cascading effect runs.\r\n     * @template T - The return type of the function\r\n     * @param {() => T} fn - A function that performs multiple signal updates\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const a = signal(1);\r\n     * const b = signal(2);\r\n     * batch(() => {\r\n     *   a.set(10);\r\n     *   b.set(20);\r\n     * }); // Effects only run once\r\n     */\r\n    export function batch<T>(fn: () => T): T {\r\n        batchDepth++;\r\n\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            batchDepth--;\r\n\r\n            // If we're back at depth 0, flush batched effects\r\n            if (batchDepth === 0) {\r\n                // Keep batch mode active while flushing to prevent cascading effects\r\n                batchDepth++;\r\n                flushedEffects.clear();\r\n                try {\r\n                    // Keep running effects until no more are queued\r\n                    while (batchedEffects.size > 0) {\r\n                        const effects = Array.from(batchedEffects);\r\n                        batchedEffects.clear();\r\n                        effects.forEach(fn => {\r\n                            // Only run if we haven't run it in this batch\r\n                            if (!flushedEffects.has(fn)) {\r\n                                flushedEffects.add(fn);\r\n                                fn();\r\n                            }\r\n                        });\r\n                    }\r\n                } finally {\r\n                    batchDepth--;\r\n                    flushedEffects.clear();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reads signals without creating dependencies on them.\r\n     * Useful for accessing signal values without triggering effect re-runs.\r\n     * @template T - The return type of the function\r\n     * @param {() => T} fn - A function that accesses signals\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const count = signal(0);\r\n     * effect(() => {\r\n     *   const value = untrack(() => count()); // Won't trigger re-run\r\n     *   console.log(value);\r\n     * });\r\n     */\r\n    export function untrack<T>(fn: () => T): T {\r\n        const prevEffect = currentEffect;\r\n        currentEffect = null;\r\n\r\n        try {\r\n            return fn();\r\n        } finally {\r\n            currentEffect = prevEffect;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Runs an effect only when a specific signal changes, providing both new and previous values.\r\n     * @template T - The type of the signal\r\n     * @param {Signal<T>} sig - The signal to watch\r\n     * @param {(value: T, prevValue: T) => EffectCleanup} fn - Effect function called with new and previous values\r\n     * @returns {() => void} A dispose function to stop watching\r\n     * @example\r\n     * const count = signal(0);\r\n     * on(count, (newVal, oldVal) => {\r\n     *   console.log(`Changed from ${oldVal} to ${newVal}`);\r\n     * });\r\n     */\r\n    export function on<T>(\r\n        sig: Signal<T>,\r\n        fn: (value: T, prevValue: T) => EffectCleanup\r\n    ): () => void {\r\n        let prevValue = sig.peek();\r\n\r\n        return effect(() => {\r\n            // Read the signal to create dependency\r\n            const value = sig();\r\n\r\n            // Run callback without tracking new dependencies\r\n            const cleanup = untrack(() => fn(value, prevValue));\r\n            prevValue = value;\r\n            return cleanup;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates a store object where each property is a signal.\r\n     * Provides a convenient way to manage multiple related reactive values.\r\n     * @template T - The type of the initial state object\r\n     * @param {T} initialState - An object with initial values\r\n     * @returns {{ [K in keyof T]: Signal<T[K]> }} An object with signals for each property\r\n     * @example\r\n     * const state = store({ count: 0, name: 'John' });\r\n     * console.log(state.count()); // 0\r\n     * state.name.set('Jane');\r\n     */\r\n    export function store<T extends Record<string, any>>(\r\n        initialState: T\r\n    ): { [K in keyof T]: Signal<T[K]> } {\r\n        const store = {} as any;\r\n\r\n        for (const key in initialState) {\r\n            store[key] = signal(initialState[key]);\r\n        }\r\n\r\n        return store;\r\n    }\r\n\r\n    /**\r\n     * Memoizes the result of an expensive computation, caching it indefinitely.\r\n     * Unlike computed, this doesn't depend on reactive signals.\r\n     * @template T - The type of the memoized value\r\n     * @param {() => T} fn - A function that performs the computation\r\n     * @returns {() => T} A function that returns the cached result\r\n     * @example\r\n     * const expensiveCalc = memo(() => {\r\n     *   return Array.from({ length: 1000 }).map(expensiveOp);\r\n     * });\r\n     * const result = expensiveCalc(); // Computed only once\r\n     */\r\n    export function memo<T>(fn: () => T): () => T {\r\n        let cachedValue: T | undefined;\r\n        let hasCachedValue = false;\r\n\r\n        return () => {\r\n            if (hasCachedValue) {\r\n                return cachedValue as T;\r\n            }\r\n\r\n            // Compute the value\r\n            const value = fn();\r\n\r\n            // Cache it\r\n            cachedValue = value;\r\n            hasCachedValue = true;\r\n\r\n            return value;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Creates a root scope for managing effect and computed signal lifecycles.\r\n     * All effects and disposers created within the function are collected and can be cleaned up together.\r\n     * @template T - The return type of the function\r\n     * @param {(dispose: () => void) => T} fn - A function that receives a dispose function\r\n     * @returns {T} The return value of the function\r\n     * @example\r\n     * const dispose = root((dispose) => {\r\n     *   effect(() => console.log('Running'));\r\n     *   return 42;\r\n     * });\r\n     * dispose(); // Cleans up all effects created in the root\r\n     */\r\n    export function root<T>(fn: (dispose: () => void) => T): T {\r\n        const disposers: (() => void)[] = [];\r\n        const prevRoot = currentRoot;\r\n        currentRoot = disposers;\r\n\r\n        try {\r\n            const dispose = () => {\r\n                disposers.forEach(d => d());\r\n                disposers.length = 0;\r\n                currentRoot = prevRoot;\r\n            };\r\n\r\n            return fn(dispose);\r\n        } finally {\r\n            currentRoot = prevRoot;\r\n        }\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ HELP ════════════════════════════════════════╗\r\n\r\n    /**\r\n     * Development utilities for debugging signal reactivity\r\n     */\r\n    export const dev = {\r\n        /**\r\n         * Returns the currently executing effect, or null if no effect is running\r\n         * @returns {(() => void) | null} The current effect function or null\r\n         */\r\n        getCurrentEffect(): (() => void) | null {\r\n            return currentEffect;\r\n        },\r\n\r\n        /**\r\n         * Returns the current batch depth (for debugging nested batch calls)\r\n         * @returns {number} The current batch nesting level\r\n         */\r\n        getBatchDepth(): number {\r\n            return batchDepth;\r\n        },\r\n\r\n        /**\r\n         * Returns the count of effects currently pending in the batch queue\r\n         * @returns {number} The number of batched effects waiting to run\r\n         */\r\n        getBatchedEffectsCount(): number {\r\n            return batchedEffects.size;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Type guard to check if a value is a signal\r\n     * @template T - The type of value the signal contains\r\n     * @param {any} value - The value to check\r\n     * @returns {boolean} True if the value is a signal\r\n     * @example\r\n     * if (isSignal(myValue)) {\r\n     *   console.log(myValue());\r\n     * }\r\n     */\r\n    export function isSignal<T>(value: any): value is Signal<T> {\r\n        return (\r\n            typeof value === 'function' &&\r\n            'set' in value &&\r\n            'update' in value &&\r\n            'peek' in value\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Type guard to check if a value is a computed signal\r\n     * @template T - The type of value the computed signal contains\r\n     * @param {any} value - The value to check\r\n     * @returns {boolean} True if the value is a computed signal\r\n     * @example\r\n     * if (isComputed(myValue)) {\r\n     *   console.log('This is a computed signal');\r\n     * }\r\n     */\r\n    export function isComputed<T>(value: any): value is Computed<T> {\r\n        return isSignal(value) && 'isComputed' in value;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ ════ ════════════════════════════════════════╗\r\n\r\n    export default {\r\n        signal,\r\n        effect,\r\n        computed,\r\n        batch,\r\n        untrack,\r\n        on,\r\n        store,\r\n        memo,\r\n        root,\r\n        isSignal,\r\n        isComputed,\r\n        dev\r\n    };\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n","// src/kit/dropdown.tsx\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { signal } from '@minejs/signals';\r\n    import type { DropdownInstance } from '../types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    class DropdownManagerClass {\r\n        private instances = signal<DropdownInstance[]>([]);\r\n\r\n        register(id: string, close: () => void, parentId: string | null = null): void {\r\n            const level = this.calculateLevel(parentId);\r\n            const instance: DropdownInstance = { id, parentId, close, level };\r\n            this.instances.update(list => [...list, instance]);\r\n        }\r\n\r\n        unregister(id: string): void {\r\n            this.instances.update(list => list.filter(item => item.id !== id));\r\n        }\r\n\r\n        open(id: string): void {\r\n            const instance = this.instances().find(item => item.id === id);\r\n            if (!instance) {\r\n                console.warn('[DropdownManager] Cannot open - dropdown not found:', id);\r\n                return;\r\n            }\r\n\r\n            const siblings = this.instances().filter(item =>\r\n                item.id !== id &&\r\n                item.level === instance.level &&\r\n                item.parentId === instance.parentId\r\n            );\r\n\r\n            siblings.forEach(sibling => {\r\n                sibling.close();\r\n            });\r\n        }\r\n\r\n        close(id: string): void {\r\n            const instance = this.instances().find(item => item.id === id);\r\n            if (!instance) return;\r\n\r\n            const children = this.getChildren(id);\r\n\r\n            children.forEach(child => {\r\n                child.close();\r\n            });\r\n\r\n            instance.close();\r\n        }\r\n\r\n        closeFromLevel(level: number): void {\r\n            const toClose = this.instances().filter(item => item.level >= level);\r\n\r\n            toClose.forEach(item => {\r\n                item.close();\r\n            });\r\n        }\r\n\r\n        private getChildren(parentId: string): DropdownInstance[] {\r\n            const directChildren = this.instances().filter(item => item.parentId === parentId);\r\n            const allChildren: DropdownInstance[] = [...directChildren];\r\n\r\n            directChildren.forEach(child => {\r\n                allChildren.push(...this.getChildren(child.id));\r\n            });\r\n\r\n            return allChildren;\r\n        }\r\n\r\n        private calculateLevel(parentId: string | null): number {\r\n            if (!parentId) return 0;\r\n\r\n            const parent = this.instances().find(item => item.id === parentId);\r\n            return parent ? parent.level + 1 : 0;\r\n        }\r\n\r\n        isAncestor(ancestorId: string, descendantId: string): boolean {\r\n            let current = this.instances().find(item => item.id === descendantId);\r\n\r\n            while (current && current.parentId) {\r\n                if (current.parentId === ancestorId) return true;\r\n                current = this.instances().find(item => item.id === current!.parentId!);\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        getRootParent(id: string): DropdownInstance | null {\r\n            let current = this.instances().find(item => item.id === id);\r\n\r\n            while (current && current.parentId) {\r\n                current = this.instances().find(item => item.id === current!.parentId!);\r\n            }\r\n\r\n            return current || null;\r\n        }\r\n\r\n        debug(): void {\r\n            console.log('[DropdownManager] Registered dropdowns:', this.instances());\r\n        }\r\n    }\r\n\r\n    export const DropdownManager = new DropdownManagerClass();\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n","// src/kit/dropdown.tsx\r\n//\r\n// Made with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import type { JSXElement }                  from '@minejs/jsx';\r\n    import { signal, effect }                   from '@minejs/signals';\r\n    import { DropdownManager }                  from './manager';\r\n    import { Container, type ContainerProps }   from '@cruxkit/container';\r\n    import { Button }                           from '@cruxkit/button';\r\n    import { Text }                             from '@cruxkit/text';\r\n    import { Icon, type IconProps, type IconName, IconConfig } from '@cruxkit/icon';\r\n    import type { DropdownProps, DropdownSize, DropdownPosition, DropdownDirection } from '../types';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\r\n\r\n    const sizeMap: Record<DropdownSize, { text: 'sm' | 'md' | 'lg'; paddingX: 3 | 4 | 5; paddingY: 1 | 2 | 3 }> = {\r\n        sm          : { text: 'sm', paddingX: 3, paddingY: 1 },\r\n        md          : { text: 'md', paddingX: 4, paddingY: 2 },\r\n        lg          : { text: 'lg', paddingX: 5, paddingY: 3 }\r\n    };\r\n\r\n    const positionMap: Record<DropdownPosition, string> = {\r\n        start       : 'start-0',\r\n        center      : 'start-1/2 -translate-x-1/2',\r\n        end         : 'end-0'\r\n    };\r\n\r\n    const directionMap: Record<DropdownDirection, { menu: string; arrow: string }> = {\r\n        down: {\r\n            menu    : 'top-full',\r\n            arrow   : 'bottom-full mb-1'\r\n        },\r\n        up: {\r\n            menu    : 'bottom-full',\r\n            arrow   : 'top-full mt-1'\r\n        },\r\n        side: {\r\n            menu    : 'top-0 start-full ms-2',\r\n            arrow   : 'top-1/2 end-full me-1 -translate-y-1/2'\r\n        }\r\n    };\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    type ContainerWithRefProps = ContainerProps & { ref?: (el: HTMLDivElement | null) => void };\r\n\r\n    const MenuContainer = Container as (props: ContainerWithRefProps) => JSXElement;\r\n\r\n    /**\r\n     * Dropdown component that renders a customizable dropdown menu.\r\n     *\r\n     * @param props - Configuration object for the dropdown.\r\n     * @returns Rendered dropdown JSX element.\r\n     *\r\n     * @example\r\n     * ```tsx\r\n     * <Dropdown\r\n     *   trigger=\"Options\"\r\n     *   options={[\r\n     *     { label: 'Edit', value: 'edit' },\r\n     *     { label: 'Delete', value: 'delete', disabled: true },\r\n     *     { divider: true },\r\n     *     { label: 'Export', value: 'export' }\r\n     *   ]}\r\n     *   onSelect={(value) => console.log(value)}\r\n     * />\r\n     * ```\r\n     */\r\n    export function Dropdown(props: DropdownProps): JSXElement {\r\n        const size = props.size || 'md';\r\n        const position = props.position || 'end';\r\n        const direction = props.direction || 'down';\r\n        const triggerMode = props.triggerMode || 'click';\r\n        const triggerDisplay = props.triggerDisplay || 'label-icon';\r\n        const hoverDelay = props.hoverDelay || 150;\r\n        const styleMode = props.styleMode || 'arrow';\r\n        const variant = props.variant || 'ghost';\r\n        const color = props.color || 'neutral';\r\n\r\n        const dropdownId = props.id || `dropdown-${Math.random().toString(36).substr(2, 9)}`;\r\n        const parentId = props.parentId || null;\r\n\r\n        const isOpen = signal(false);\r\n        let hoverTimeout: ReturnType<typeof setTimeout> | null = null;\r\n        let chevronElement: HTMLSpanElement | null = null;\r\n        let dropdownContainer: HTMLDivElement | null = null;\r\n        let dropdownMenu: HTMLDivElement | null = null;\r\n\r\n        effect(() => {\r\n            props.onOpenChange?.(isOpen());\r\n        });\r\n\r\n        const arrowSize = 6;\r\n        let arrowStyle: Record<string, string> = {\r\n            width: '0',\r\n            height: '0'\r\n        };\r\n\r\n        if (direction === 'up') {\r\n            arrowStyle = {\r\n                width: '0',\r\n                height: '0',\r\n                borderLeft: `${arrowSize}px solid transparent`,\r\n                borderRight: `${arrowSize}px solid transparent`,\r\n                borderBottom: `${arrowSize}px solid var(--bg-surface)`,\r\n                borderTop: '0'\r\n            };\r\n        } else if (direction === 'side') {\r\n            arrowStyle = {\r\n                width: '0',\r\n                height: '0',\r\n                borderTop: `${arrowSize}px solid transparent`,\r\n                borderBottom: `${arrowSize}px solid transparent`,\r\n                borderInlineStart: `${arrowSize}px solid var(--bg-surface)`,\r\n                borderInlineEnd: '0'\r\n            };\r\n        } else {\r\n            arrowStyle = {\r\n                width: '0',\r\n                height: '0',\r\n                borderLeft: `${arrowSize}px solid transparent`,\r\n                borderRight: `${arrowSize}px solid transparent`,\r\n                borderTop: `${arrowSize}px solid var(--bg-surface)`,\r\n                borderBottom: '0'\r\n            };\r\n        }\r\n\r\n        DropdownManager.register(\r\n            dropdownId,\r\n            () => {\r\n                isOpen.set(false);\r\n            },\r\n            parentId\r\n        );\r\n\r\n        effect(() => {\r\n            return () => {\r\n                DropdownManager.unregister(dropdownId);\r\n                if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            };\r\n        });\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n            if (!isCurrentlyOpen) return;\r\n\r\n            const handleClickOutside = (e: MouseEvent) => {\r\n                if (dropdownContainer && !dropdownContainer.contains(e.target as Node)) {\r\n                    DropdownManager.close(dropdownId);\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', handleClickOutside);\r\n\r\n            return () => {\r\n                document.removeEventListener('click', handleClickOutside);\r\n            };\r\n        });\r\n\r\n        const toggleDropdown = (e: Event) => {\r\n            e.stopPropagation();\r\n            const newState = !isOpen();\r\n\r\n            if (newState) {\r\n                DropdownManager.open(dropdownId);\r\n                isOpen.set(true);\r\n            } else {\r\n                DropdownManager.close(dropdownId);\r\n            }\r\n        };\r\n\r\n        const openDropdown = () => {\r\n            if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            hoverTimeout = setTimeout(() => {\r\n                DropdownManager.open(dropdownId);\r\n                isOpen.set(true);\r\n            }, hoverDelay);\r\n        };\r\n\r\n        const closeDropdown = () => {\r\n            if (hoverTimeout) clearTimeout(hoverTimeout);\r\n            hoverTimeout = setTimeout(() => {\r\n                DropdownManager.close(dropdownId);\r\n            }, hoverDelay);\r\n        };\r\n\r\n        const handleSelect = (value: string | number, disabled?: boolean) => {\r\n            if (disabled) return;\r\n\r\n            props.onSelect?.(value);\r\n            DropdownManager.close(dropdownId);\r\n        };\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n\r\n            if (dropdownMenu) {\r\n                if (isCurrentlyOpen) {\r\n                    dropdownMenu.classList.remove('hidden');\r\n                    dropdownMenu.classList.add('flex');\r\n                } else {\r\n                    dropdownMenu.classList.remove('flex');\r\n                    dropdownMenu.classList.add('hidden');\r\n                }\r\n            }\r\n        });\r\n\r\n        effect(() => {\r\n            const isCurrentlyOpen = isOpen();\r\n\r\n            if (!chevronElement) return;\r\n\r\n            if (isCurrentlyOpen) {\r\n                chevronElement.classList.add('rotate-180');\r\n            } else {\r\n                chevronElement.classList.remove('rotate-180');\r\n            }\r\n        });\r\n\r\n        const renderTriggerContent = () => {\r\n            const iconElement = props.triggerIcon\r\n                ? typeof props.triggerIcon === 'string'\r\n                    ? <Icon name={props.triggerIcon as IconName} size=\"md\" />\r\n                    : <Icon {...props.triggerIcon} />\r\n                : null;\r\n\r\n            const renderChevron = () => {\r\n                if (!props.labelArrow) return null;\r\n\r\n                return (\r\n                    <span\r\n                        ref={(el: HTMLSpanElement | null) => {\r\n                            chevronElement = el;\r\n                        }}\r\n                        className=\"transition-transform duration-200\"\r\n                    >\r\n                        <Icon name={'chevron-down' as IconName} size=\"sm\" />\r\n                    </span>\r\n                );\r\n            };\r\n\r\n            const label =\r\n                typeof props.trigger === 'string'\r\n                    ? (\r\n                        <Text as=\"span\" size={sizeMap[size].text}>\r\n                            {props.trigger}\r\n                        </Text>\r\n                    )\r\n                    : props.trigger;\r\n\r\n            switch (triggerDisplay) {\r\n                case 'icon-only':\r\n                    return (\r\n                        <Container as=\"span\" display=\"inline-flex\" align=\"center\" gap={1}>\r\n                            {iconElement || renderChevron()}\r\n                        </Container>\r\n                    );\r\n\r\n                case 'label-only':\r\n                    return (\r\n                        <Container as=\"span\" display=\"inline-flex\" align=\"center\" gap={2}>\r\n                            {label}\r\n                            {renderChevron()}\r\n                        </Container>\r\n                    );\r\n\r\n                case 'label-icon':\r\n                default:\r\n                    return (\r\n                        <Container as=\"span\" display=\"inline-flex\" align=\"center\" gap={2}>\r\n                            {iconElement}\r\n                            {label}\r\n                            {renderChevron()}\r\n                        </Container>\r\n                    );\r\n            }\r\n        };\r\n\r\n        const getTriggerHandlers = () => {\r\n            switch (triggerMode) {\r\n                case 'hover':\r\n                    return {\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    };\r\n\r\n                case 'both':\r\n                    return {\r\n                        onClick: toggleDropdown,\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    };\r\n\r\n                case 'click':\r\n                default:\r\n                    return {\r\n                        onClick: toggleDropdown\r\n                    };\r\n            }\r\n        };\r\n\r\n        const triggerHandlers = getTriggerHandlers();\r\n\r\n        const sizeConf = sizeMap[size];\r\n\r\n        return (\r\n            <div\r\n                ref={(el: HTMLDivElement | null) => {\r\n                    dropdownContainer = el;\r\n                }}\r\n                className=\"dropdown relative inline-block\"\r\n                {...(triggerMode === 'hover' || triggerMode === 'both'\r\n                    ? {\r\n                        onMouseEnter: openDropdown,\r\n                        onMouseLeave: closeDropdown\r\n                    }\r\n                    : {})}\r\n            >\r\n                <Button\r\n                    variant={variant}\r\n                    color={color}\r\n                    size={size}\r\n                    className={props.className}\r\n                    {...triggerHandlers}\r\n                >\r\n                    <Container\r\n                        as=\"span\"\r\n                        display=\"inline-flex\"\r\n                        align=\"center\"\r\n                        gap={sizeConf.text === 'sm' ? 1 : 2}\r\n                    >\r\n                        {typeof props.trigger === 'string'\r\n                            ? renderTriggerContent()\r\n                            : props.trigger}\r\n                    </Container>\r\n                </Button>\r\n\r\n                <MenuContainer\r\n                    as=\"div\"\r\n                    display=\"flex\"\r\n                    direction=\"column\"\r\n                    className={`\r\n                        dropdown-menu\r\n                        absolute\r\n                        ${directionMap[direction].menu}\r\n                        ${positionMap[position]}\r\n                        hidden\r\n                        bg-surface\r\n                        shadow-lg\r\n                        z-50\r\n                        py-1\r\n                        ${styleMode === 'partof'\r\n                            ? 'w-full min-w-fit rounded-none border-x border-b border-1 mt-0'\r\n                            : `w-full min-w-fit rounded-md border border-1 ${direction === 'down' ? 'mt-2' : ''} ${direction === 'up' ? 'mb-2' : ''}`}\r\n                    `}\r\n                    ref={(el: HTMLDivElement | null) => {\r\n                        dropdownMenu = el;\r\n                        if (el) {\r\n                            setTimeout(() => {\r\n                                if (isOpen()) {\r\n                                    el.classList.remove('hidden');\r\n                                    el.classList.add('flex');\r\n                                } else {\r\n                                    el.classList.remove('flex');\r\n                                    el.classList.add('hidden');\r\n                                }\r\n                            }, 0);\r\n                        }\r\n                    }}\r\n                    children={\r\n                        <>\r\n                            {styleMode === 'arrow' && props.labelArrow && (\r\n                                <div\r\n                                    className={`\r\n                                        absolute\r\n                                        ${directionMap[direction].arrow}\r\n                                    `}\r\n                                    style={arrowStyle}\r\n                                />\r\n                            )}\r\n\r\n                            {props.options.map((option, idx) =>\r\n                                option.divider ? (\r\n                                    <div\r\n                                        key={'divider-' + idx}\r\n                                        className=\"h-px bg-1 opacity-20 my-1\"\r\n                                        role=\"separator\"\r\n                                    />\r\n                                ) : (\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        color={color}\r\n                                        size={size}\r\n                                        fullWidth\r\n                                        className={`\r\n                                            dropdown-option\r\n                                            justify-start\r\n                                            text-base\r\n                                            text-1\r\n                                            whitespace-nowrap\r\n                                            ${option.disabled ? 'opacity-50 cursor-not-allowed pointer-events-none' : ''}\r\n                                        `}\r\n                                        onClick={() => handleSelect(option.value, option.disabled)}\r\n                                        disabled={option.disabled}\r\n                                        leftIcon={option.icon as IconProps | IconName | undefined}\r\n                                        type=\"button\"\r\n                                    >\r\n                                        {option.label}\r\n                                    </Button>\r\n                                )\r\n                            )}\r\n                        </>\r\n                    }\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n"]}